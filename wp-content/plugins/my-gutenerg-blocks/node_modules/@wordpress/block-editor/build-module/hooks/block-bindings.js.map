{"version":3,"names":["__","store","blocksStore","PanelBody","__experimentalHStack","HStack","__experimentalItemGroup","ItemGroup","__experimentalItem","Item","useSelect","canBindAttribute","unlock","InspectorControls","jsx","_jsx","jsxs","_jsxs","BlockBindingsPanel","name","metadata","bindings","sources","select","_sources","getAllBlockBindingsSources","filteredBindings","Object","keys","forEach","key","source","length","children","title","className","isBordered","isSeparated","size","map","label","edit","attributeKeys","hasSupport"],"sources":["@wordpress/block-editor/src/hooks/block-bindings.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { store as blocksStore } from '@wordpress/blocks';\nimport {\n\tPanelBody,\n\t__experimentalHStack as HStack,\n\t__experimentalItemGroup as ItemGroup,\n\t__experimentalItem as Item,\n} from '@wordpress/components';\nimport { useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { canBindAttribute } from '../hooks/use-bindings-attributes';\nimport { unlock } from '../lock-unlock';\nimport InspectorControls from '../components/inspector-controls';\n\nexport const BlockBindingsPanel = ( { name, metadata } ) => {\n\tconst { bindings } = metadata || {};\n\tconst { sources } = useSelect( ( select ) => {\n\t\tconst _sources = unlock(\n\t\t\tselect( blocksStore )\n\t\t).getAllBlockBindingsSources();\n\n\t\treturn {\n\t\t\tsources: _sources,\n\t\t};\n\t}, [] );\n\n\tif ( ! bindings ) {\n\t\treturn null;\n\t}\n\n\t// Don't show not allowed attributes.\n\t// Don't show the bindings connected to pattern overrides in the inspectors panel.\n\t// TODO: Explore if this should be abstracted to let other sources decide.\n\tconst filteredBindings = { ...bindings };\n\tObject.keys( filteredBindings ).forEach( ( key ) => {\n\t\tif (\n\t\t\t! canBindAttribute( name, key ) ||\n\t\t\tfilteredBindings[ key ].source === 'core/pattern-overrides'\n\t\t) {\n\t\t\tdelete filteredBindings[ key ];\n\t\t}\n\t} );\n\n\tif ( Object.keys( filteredBindings ).length === 0 ) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<InspectorControls>\n\t\t\t<PanelBody\n\t\t\t\ttitle={ __( 'Bindings' ) }\n\t\t\t\tclassName=\"components-panel__block-bindings-panel\"\n\t\t\t>\n\t\t\t\t<ItemGroup isBordered isSeparated size=\"large\">\n\t\t\t\t\t{ Object.keys( filteredBindings ).map( ( key ) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<Item key={ key }>\n\t\t\t\t\t\t\t\t<HStack>\n\t\t\t\t\t\t\t\t\t<span>{ key }</span>\n\t\t\t\t\t\t\t\t\t<span className=\"components-item__block-bindings-source\">\n\t\t\t\t\t\t\t\t\t\t{ sources[\n\t\t\t\t\t\t\t\t\t\t\tfilteredBindings[ key ].source\n\t\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t\t\t\t? sources[\n\t\t\t\t\t\t\t\t\t\t\t\t\tfilteredBindings[ key ]\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.source\n\t\t\t\t\t\t\t\t\t\t\t  ].label\n\t\t\t\t\t\t\t\t\t\t\t: filteredBindings[ key ].source }\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</HStack>\n\t\t\t\t\t\t\t</Item>\n\t\t\t\t\t\t);\n\t\t\t\t\t} ) }\n\t\t\t\t</ItemGroup>\n\t\t\t</PanelBody>\n\t\t</InspectorControls>\n\t);\n};\n\nexport default {\n\tedit: BlockBindingsPanel,\n\tattributeKeys: [ 'metadata' ],\n\thasSupport() {\n\t\treturn true;\n\t},\n};\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,EAAE,QAAQ,iBAAiB;AACpC,SAASC,KAAK,IAAIC,WAAW,QAAQ,mBAAmB;AACxD,SACCC,SAAS,EACTC,oBAAoB,IAAIC,MAAM,EAC9BC,uBAAuB,IAAIC,SAAS,EACpCC,kBAAkB,IAAIC,IAAI,QACpB,uBAAuB;AAC9B,SAASC,SAAS,QAAQ,iBAAiB;;AAE3C;AACA;AACA;AACA,SAASC,gBAAgB,QAAQ,kCAAkC;AACnE,SAASC,MAAM,QAAQ,gBAAgB;AACvC,OAAOC,iBAAiB,MAAM,kCAAkC;AAAC,SAAAC,GAAA,IAAAC,IAAA;AAAA,SAAAC,IAAA,IAAAC,KAAA;AAEjE,OAAO,MAAMC,kBAAkB,GAAGA,CAAE;EAAEC,IAAI;EAAEC;AAAS,CAAC,KAAM;EAC3D,MAAM;IAAEC;EAAS,CAAC,GAAGD,QAAQ,IAAI,CAAC,CAAC;EACnC,MAAM;IAAEE;EAAQ,CAAC,GAAGZ,SAAS,CAAIa,MAAM,IAAM;IAC5C,MAAMC,QAAQ,GAAGZ,MAAM,CACtBW,MAAM,CAAErB,WAAY,CACrB,CAAC,CAACuB,0BAA0B,CAAC,CAAC;IAE9B,OAAO;MACNH,OAAO,EAAEE;IACV,CAAC;EACF,CAAC,EAAE,EAAG,CAAC;EAEP,IAAK,CAAEH,QAAQ,EAAG;IACjB,OAAO,IAAI;EACZ;;EAEA;EACA;EACA;EACA,MAAMK,gBAAgB,GAAG;IAAE,GAAGL;EAAS,CAAC;EACxCM,MAAM,CAACC,IAAI,CAAEF,gBAAiB,CAAC,CAACG,OAAO,CAAIC,GAAG,IAAM;IACnD,IACC,CAAEnB,gBAAgB,CAAEQ,IAAI,EAAEW,GAAI,CAAC,IAC/BJ,gBAAgB,CAAEI,GAAG,CAAE,CAACC,MAAM,KAAK,wBAAwB,EAC1D;MACD,OAAOL,gBAAgB,CAAEI,GAAG,CAAE;IAC/B;EACD,CAAE,CAAC;EAEH,IAAKH,MAAM,CAACC,IAAI,CAAEF,gBAAiB,CAAC,CAACM,MAAM,KAAK,CAAC,EAAG;IACnD,OAAO,IAAI;EACZ;EAEA,oBACCjB,IAAA,CAACF,iBAAiB;IAAAoB,QAAA,eACjBlB,IAAA,CAACZ,SAAS;MACT+B,KAAK,EAAGlC,EAAE,CAAE,UAAW,CAAG;MAC1BmC,SAAS,EAAC,wCAAwC;MAAAF,QAAA,eAElDlB,IAAA,CAACR,SAAS;QAAC6B,UAAU;QAACC,WAAW;QAACC,IAAI,EAAC,OAAO;QAAAL,QAAA,EAC3CN,MAAM,CAACC,IAAI,CAAEF,gBAAiB,CAAC,CAACa,GAAG,CAAIT,GAAG,IAAM;UACjD,oBACCf,IAAA,CAACN,IAAI;YAAAwB,QAAA,eACJhB,KAAA,CAACZ,MAAM;cAAA4B,QAAA,gBACNlB,IAAA;gBAAAkB,QAAA,EAAQH;cAAG,CAAQ,CAAC,eACpBf,IAAA;gBAAMoB,SAAS,EAAC,wCAAwC;gBAAAF,QAAA,EACrDX,OAAO,CACRI,gBAAgB,CAAEI,GAAG,CAAE,CAACC,MAAM,CAC9B,GACET,OAAO,CACPI,gBAAgB,CAAEI,GAAG,CAAE,CACrBC,MAAM,CACP,CAACS,KAAK,GACPd,gBAAgB,CAAEI,GAAG,CAAE,CAACC;cAAM,CAC5B,CAAC;YAAA,CACA;UAAC,GAbED,GAcN,CAAC;QAET,CAAE;MAAC,CACO;IAAC,CACF;EAAC,CACM,CAAC;AAEtB,CAAC;AAED,eAAe;EACdW,IAAI,EAAEvB,kBAAkB;EACxBwB,aAAa,EAAE,CAAE,UAAU,CAAE;EAC7BC,UAAUA,CAAA,EAAG;IACZ,OAAO,IAAI;EACZ;AACD,CAAC","ignoreList":[]}