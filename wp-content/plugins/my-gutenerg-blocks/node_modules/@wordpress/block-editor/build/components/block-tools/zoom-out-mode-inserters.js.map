{"version":3,"names":["_data","require","_element","_components","_icons","_i18n","_inbetween","_interopRequireDefault","_store","_lockUnlock","_jsxRuntime","ZoomOutModeInserters","isReady","setIsReady","useState","blockOrder","sectionRootClientId","insertionPoint","setInserterIsOpened","selectedSection","useSelect","select","getSettings","getBlockOrder","blockEditorStore","root","unlock","editor","getSelectedBlock","getInsertionPoint","__experimentalSetIsInserterOpened","isMounted","useRef","useEffect","current","timeout","setTimeout","clearTimeout","undefined","map","clientId","index","jsxs","default","previousClientId","nextClientId","children","insertionIndex","jsx","style","borderRadius","height","opacity","transform","width","className","Button","variant","icon","plus","size","onClick","rootClientId","tab","category","label","_x","_default","exports"],"sources":["@wordpress/block-editor/src/components/block-tools/zoom-out-mode-inserters.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { useSelect } from '@wordpress/data';\nimport { useEffect, useRef, useState } from '@wordpress/element';\nimport { Button } from '@wordpress/components';\nimport { plus } from '@wordpress/icons';\nimport { _x } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport BlockPopoverInbetween from '../block-popover/inbetween';\nimport { store as blockEditorStore } from '../../store';\nimport { unlock } from '../../lock-unlock';\n\nfunction ZoomOutModeInserters() {\n\tconst [ isReady, setIsReady ] = useState( false );\n\tconst {\n\t\tblockOrder,\n\t\tsectionRootClientId,\n\t\tinsertionPoint,\n\t\tsetInserterIsOpened,\n\t\tselectedSection,\n\t} = useSelect( ( select ) => {\n\t\tconst { getSettings, getBlockOrder } = select( blockEditorStore );\n\t\tconst { sectionRootClientId: root } = unlock( getSettings() );\n\t\t// To do: move ZoomOutModeInserters to core/editor.\n\t\t// Or we perhaps we should move the insertion point state to the\n\t\t// block-editor store. I'm not sure what it was ever moved to the editor\n\t\t// store, because all the inserter components all live in the\n\t\t// block-editor package.\n\t\t// eslint-disable-next-line @wordpress/data-no-store-string-literals\n\t\tconst editor = select( 'core/editor' );\n\t\treturn {\n\t\t\tselectedSection: editor.getSelectedBlock(),\n\t\t\tblockOrder: getBlockOrder( root ),\n\t\t\tinsertionPoint: unlock( editor ).getInsertionPoint(),\n\t\t\tsectionRootClientId: root,\n\t\t\tsetInserterIsOpened:\n\t\t\t\tgetSettings().__experimentalSetIsInserterOpened,\n\t\t};\n\t}, [] );\n\n\tconst isMounted = useRef( false );\n\n\tuseEffect( () => {\n\t\tif ( ! isMounted.current ) {\n\t\t\tisMounted.current = true;\n\t\t\treturn;\n\t\t}\n\t\t// reset insertion point when the block order changes\n\t\tsetInserterIsOpened( true );\n\t}, [ blockOrder, setInserterIsOpened ] );\n\n\t// Defer the initial rendering to avoid the jumps due to the animation.\n\tuseEffect( () => {\n\t\tconst timeout = setTimeout( () => {\n\t\t\tsetIsReady( true );\n\t\t}, 500 );\n\t\treturn () => {\n\t\t\tclearTimeout( timeout );\n\t\t};\n\t}, [] );\n\n\tif ( ! isReady || ! selectedSection ) {\n\t\treturn null;\n\t}\n\n\treturn [ undefined, ...blockOrder ].map( ( clientId, index ) => {\n\t\treturn (\n\t\t\t<BlockPopoverInbetween\n\t\t\t\tkey={ index }\n\t\t\t\tpreviousClientId={ clientId }\n\t\t\t\tnextClientId={ blockOrder[ index ] }\n\t\t\t>\n\t\t\t\t{ insertionPoint.insertionIndex === index && (\n\t\t\t\t\t<div\n\t\t\t\t\t\tstyle={ {\n\t\t\t\t\t\t\tborderRadius: '0',\n\t\t\t\t\t\t\theight: '12px',\n\t\t\t\t\t\t\topacity: 1,\n\t\t\t\t\t\t\ttransform: 'translateY(-50%)',\n\t\t\t\t\t\t\twidth: '100%',\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tclassName=\"block-editor-block-list__insertion-point-indicator\"\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t\t{ insertionPoint.insertionIndex !== index && (\n\t\t\t\t\t<Button\n\t\t\t\t\t\tvariant=\"primary\"\n\t\t\t\t\t\ticon={ plus }\n\t\t\t\t\t\tsize=\"compact\"\n\t\t\t\t\t\tclassName=\"block-editor-button-pattern-inserter__button\"\n\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\tsetInserterIsOpened( {\n\t\t\t\t\t\t\t\trootClientId: sectionRootClientId,\n\t\t\t\t\t\t\t\tinsertionIndex: index,\n\t\t\t\t\t\t\t\ttab: 'patterns',\n\t\t\t\t\t\t\t\tcategory: 'all',\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tlabel={ _x(\n\t\t\t\t\t\t\t'Add pattern',\n\t\t\t\t\t\t\t'Generic label for pattern inserter button'\n\t\t\t\t\t\t) }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t</BlockPopoverInbetween>\n\t\t);\n\t} );\n}\n\nexport default ZoomOutModeInserters;\n"],"mappings":"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","ignoreList":[]}