{"version":3,"names":["Ariakit","warning","forwardRef","useEffect","useLayoutEffect","useRef","useState","useTabsContext","TabListWrapper","clsx","jsx","_jsx","useTrackElementOffset","targetElement","onUpdate","indicatorPosition","setIndicatorPosition","left","top","width","height","updateCallbackRef","current","observedElementRef","resizeObserverRef","undefined","updateIndicator","element","offsetLeft","offsetTop","offsetWidth","offsetHeight","ResizeObserver","resizeObserver","observe","unobserve","useOnValueUpdate","value","previousValueRef","previousValue","TabList","children","otherProps","ref","context","selectedId","store","item","animationEnabled","setAnimationEnabled","globalThis","SCRIPT_DEBUG","activeId","selectOnMove","setActiveId","onBlur","render","onTransitionEnd","event","pseudoElement","style","className"],"sources":["@wordpress/components/src/tabs/tablist.tsx"],"sourcesContent":["/**\n * External dependencies\n */\n// eslint-disable-next-line no-restricted-imports\nimport * as Ariakit from '@ariakit/react';\n\n/**\n * WordPress dependencies\n */\nimport warning from '@wordpress/warning';\nimport {\n\tforwardRef,\n\tuseEffect,\n\tuseLayoutEffect,\n\tuseRef,\n\tuseState,\n} from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport type { TabListProps } from './types';\nimport { useTabsContext } from './context';\nimport { TabListWrapper } from './styles';\nimport type { WordPressComponentProps } from '../context';\nimport clsx from 'clsx';\n\nfunction useTrackElementOffset(\n\ttargetElement?: HTMLElement | null,\n\tonUpdate?: () => void\n) {\n\tconst [ indicatorPosition, setIndicatorPosition ] = useState( {\n\t\tleft: 0,\n\t\ttop: 0,\n\t\twidth: 0,\n\t\theight: 0,\n\t} );\n\n\t// TODO: replace with useEventCallback or similar when officially available.\n\tconst updateCallbackRef = useRef( onUpdate );\n\tuseLayoutEffect( () => {\n\t\tupdateCallbackRef.current = onUpdate;\n\t} );\n\n\tconst observedElementRef = useRef< HTMLElement >();\n\tconst resizeObserverRef = useRef< ResizeObserver >();\n\tuseEffect( () => {\n\t\tif ( targetElement === observedElementRef.current ) {\n\t\t\treturn;\n\t\t}\n\n\t\tobservedElementRef.current = targetElement ?? undefined;\n\n\t\tfunction updateIndicator( element: HTMLElement ) {\n\t\t\tsetIndicatorPosition( {\n\t\t\t\tleft: element.offsetLeft,\n\t\t\t\ttop: element.offsetTop,\n\t\t\t\twidth: element.offsetWidth,\n\t\t\t\theight: element.offsetHeight,\n\t\t\t} );\n\t\t\tupdateCallbackRef.current?.();\n\t\t}\n\n\t\t// Set up a ResizeObserver.\n\t\tif ( ! resizeObserverRef.current ) {\n\t\t\tresizeObserverRef.current = new ResizeObserver( () => {\n\t\t\t\tif ( observedElementRef.current ) {\n\t\t\t\t\tupdateIndicator( observedElementRef.current );\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t\tconst { current: resizeObserver } = resizeObserverRef;\n\n\t\t// Observe new element.\n\t\tif ( targetElement ) {\n\t\t\tupdateIndicator( targetElement );\n\t\t\tresizeObserver.observe( targetElement );\n\t\t}\n\n\t\treturn () => {\n\t\t\t// Unobserve previous element.\n\t\t\tif ( observedElementRef.current ) {\n\t\t\t\tresizeObserver.unobserve( observedElementRef.current );\n\t\t\t}\n\t\t};\n\t}, [ targetElement ] );\n\n\treturn indicatorPosition;\n}\n\ntype ValueUpdateContext< T > = {\n\tpreviousValue: T;\n};\n\nfunction useOnValueUpdate< T >(\n\tvalue: T,\n\tonUpdate: ( context: ValueUpdateContext< T > ) => void\n) {\n\tconst previousValueRef = useRef( value );\n\n\t// TODO: replace with useEventCallback or similar when officially available.\n\tconst updateCallbackRef = useRef( onUpdate );\n\tuseLayoutEffect( () => {\n\t\tupdateCallbackRef.current = onUpdate;\n\t} );\n\n\tuseEffect( () => {\n\t\tif ( previousValueRef.current !== value ) {\n\t\t\tupdateCallbackRef.current( {\n\t\t\t\tpreviousValue: previousValueRef.current,\n\t\t\t} );\n\t\t\tpreviousValueRef.current = value;\n\t\t}\n\t}, [ value ] );\n}\n\nexport const TabList = forwardRef<\n\tHTMLDivElement,\n\tWordPressComponentProps< TabListProps, 'div', false >\n>( function TabList( { children, ...otherProps }, ref ) {\n\tconst context = useTabsContext();\n\n\tconst selectedId = context?.store.useState( 'selectedId' );\n\tconst indicatorPosition = useTrackElementOffset(\n\t\tcontext?.store.item( selectedId )?.element\n\t);\n\n\tconst [ animationEnabled, setAnimationEnabled ] = useState( false );\n\tuseOnValueUpdate(\n\t\tselectedId,\n\t\t( { previousValue } ) => previousValue && setAnimationEnabled( true )\n\t);\n\n\tif ( ! context ) {\n\t\twarning( '`Tabs.TabList` must be wrapped in a `Tabs` component.' );\n\t\treturn null;\n\t}\n\tconst { store } = context;\n\n\tconst { activeId, selectOnMove } = store.useState();\n\tconst { setActiveId } = store;\n\n\tconst onBlur = () => {\n\t\tif ( ! selectOnMove ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// When automatic tab selection is on, make sure that the active tab is up\n\t\t// to date with the selected tab when leaving the tablist. This makes sure\n\t\t// that the selected tab will receive keyboard focus when tabbing back into\n\t\t// the tablist.\n\t\tif ( selectedId !== activeId ) {\n\t\t\tsetActiveId( selectedId );\n\t\t}\n\t};\n\n\treturn (\n\t\t<Ariakit.TabList\n\t\t\tref={ ref }\n\t\t\tstore={ store }\n\t\t\trender={\n\t\t\t\t<TabListWrapper\n\t\t\t\t\tonTransitionEnd={ ( event ) => {\n\t\t\t\t\t\tif ( event.pseudoElement === '::after' ) {\n\t\t\t\t\t\t\tsetAnimationEnabled( false );\n\t\t\t\t\t\t}\n\t\t\t\t\t} }\n\t\t\t\t/>\n\t\t\t}\n\t\t\tonBlur={ onBlur }\n\t\t\t{ ...otherProps }\n\t\t\tstyle={ {\n\t\t\t\t'--indicator-left': `${ indicatorPosition.left }px`,\n\t\t\t\t'--indicator-top': `${ indicatorPosition.top }px`,\n\t\t\t\t'--indicator-width': `${ indicatorPosition.width }px`,\n\t\t\t\t'--indicator-height': `${ indicatorPosition.height }px`,\n\t\t\t\t...otherProps.style,\n\t\t\t} }\n\t\t\tclassName={ clsx(\n\t\t\t\tanimationEnabled ? 'is-animation-enabled' : '',\n\t\t\t\totherProps.className\n\t\t\t) }\n\t\t>\n\t\t\t{ children }\n\t\t</Ariakit.TabList>\n\t);\n} );\n"],"mappings":"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","ignoreList":[]}